<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wolf Studios | Streaming Premium</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Netflix+Sans:wght@300;400;500;700;900&family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #141414;
            color: #fff;
            overflow-x: hidden;
        }
        
        /* Header Netflix Style */
        .header-netflix {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            transition: background 0.3s ease;
            background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%);
        }
        
        .header-netflix.scrolled {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
        }
        
        /* Logo Animation */
        .logo-svg {
            width: 50px;
            height: 50px;
            filter: drop-shadow(0 0 10px rgba(163, 230, 53, 0.5));
            transition: all 0.3s ease;
        }
        
        .logo-svg:hover {
            transform: scale(1.1);
            filter: drop-shadow(0 0 20px rgba(163, 230, 53, 0.8));
        }
        
        /* Navigation */
        .nav-link {
            position: relative;
            color: #e5e5e5;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .nav-link:hover { color: #b3b3b3; }
        
        .nav-link.active {
            color: #fff;
            font-weight: 700;
        }
        
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 100%;
            height: 3px;
            background: #a3e635;
            border-radius: 2px;
        }
        
        /* Hero Banner */
        .hero-banner {
            position: relative;
            height: 85vh;
            display: flex;
            align-items: center;
            background: linear-gradient(90deg, #141414 0%, transparent 50%, #141414 100%),
                        linear-gradient(0deg, #141414 0%, transparent 50%),
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect fill="%23222" width="100" height="100"/></svg>');
            background-size: cover;
            background-position: center;
            margin-top: 70px;
        }
        
        .hero-content {
            max-width: 650px;
            padding: 0 60px;
        }
        
        .hero-logo-large {
            width: 200px;
            height: 200px;
            filter: drop-shadow(0 0 40px rgba(163, 230, 53, 0.6));
            animation: heroFloat 4s ease-in-out infinite;
        }
        
        @keyframes heroFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        
        /* Content Rows (Netflix Style) */
        .content-row {
            padding: 0 60px;
            margin-bottom: 50px;
        }
        
        .row-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #e5e5e5;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .cards-container {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding-bottom: 20px;
            scrollbar-width: thin;
            scrollbar-color: #4a4a4a #1a1a1a;
        }
        
        .cards-container::-webkit-scrollbar {
            height: 8px;
        }
        
        .cards-container::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 10px;
        }
        
        .cards-container::-webkit-scrollbar-thumb {
            background: #4a4a4a;
            border-radius: 10px;
        }
        
        .cards-container::-webkit-scrollbar-thumb:hover {
            background: #5a5a5a;
        }
        
        /* Content Card */
        .content-card {
            position: relative;
            min-width: 280px;
            height: 160px;
            background: #2a2a2a;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #4a4a4a;
        }
        
        .content-card.trailer-card {
            height: 200px;
        }
        
        .content-card.has-content {
            border: none;
            background-size: cover;
            background-position: center;
        }
        
        .content-card:hover {
            transform: scale(1.05);
            z-index: 10;
            box-shadow: 0 8px 30px rgba(0,0,0,0.5);
        }
        
        .trailer-play-icon {
            position: absolute;
            width: 60px;
            height: 60px;
            background: rgba(163, 230, 53, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #000;
            opacity: 0.8;
            transition: all 0.3s ease;
            pointer-events: none;
        }
        
        .content-card:hover .trailer-play-icon {
            opacity: 1;
            transform: scale(1.1);
        }
        
        .card-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(0deg, rgba(0,0,0,0.8) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 15px;
        }
        
        .content-card:hover .card-overlay {
            opacity: 1;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .card-info {
            font-size: 12px;
            color: #b3b3b3;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .card-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }
        
        .btn-play, .btn-info {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid #fff;
            background: rgba(42, 42, 42, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-play:hover {
            background: #fff;
            color: #000;
            transform: scale(1.1);
        }
        
        .btn-info:hover {
            border-color: #a3e635;
            color: #a3e635;
            transform: scale(1.1);
        }
        
        /* Empty State */
        .empty-card-content {
            text-align: center;
            color: #666;
        }
        
        .empty-card-content i {
            font-size: 40px;
            margin-bottom: 10px;
            opacity: 0.3;
        }
        
        .empty-card-content p {
            font-size: 12px;
            opacity: 0.5;
        }
        
        /* Upload Button (Admin Only) */
        .upload-btn {
            background: #a3e635;
            color: #000;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .upload-btn:hover {
            background: #84cc16;
            transform: scale(1.05);
        }
        
        /* Modal */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .modal-content {
            background: #181818;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .modal.active .modal-content {
            transform: scale(1);
        }
        
        .modal-header {
            padding: 30px 30px 20px;
            border-bottom: 1px solid #333;
        }
        
        .modal-body {
            padding: 30px;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #2a2a2a;
            border: none;
            color: #fff;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .modal-close:hover {
            background: #a3e635;
            color: #000;
            transform: rotate(90deg);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #e5e5e5;
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 16px;
            background: #2a2a2a;
            border: 1px solid #333;
            border-radius: 6px;
            color: #fff;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #a3e635;
            background: #1a1a1a;
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .file-upload-area {
            border: 2px dashed #4a4a4a;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .file-upload-area:hover {
            border-color: #a3e635;
            background: #1a1a1a;
        }
        
        .file-upload-area.dragover {
            border-color: #a3e635;
            background: #1a2a1a;
        }
        
        .btn-primary {
            width: 100%;
            padding: 14px;
            background: #a3e635;
            color: #000;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: #84cc16;
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(163, 230, 53, 0.3);
        }
        
        .btn-secondary {
            width: 100%;
            padding: 14px;
            background: #2a2a2a;
            color: #fff;
            border: 1px solid #4a4a4a;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .btn-secondary:hover {
            background: #3a3a3a;
            border-color: #5a5a5a;
        }
        
        /* Video Modal */
        .video-modal-content {
            background: #000;
            border-radius: 12px;
            max-width: 1200px;
            width: 95%;
            position: relative;
            overflow: hidden;
        }
        
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
            overflow: hidden;
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .video-info {
            padding: 30px;
            background: #141414;
        }
        
        .video-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .video-description {
            color: #b3b3b3;
            line-height: 1.6;
        }
        
        /* User Menu */
        .user-menu {
            position: relative;
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            background: linear-gradient(135deg, #a3e635, #84cc16);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .user-avatar:hover {
            transform: scale(1.1);
        }
        
        .user-dropdown {
            position: absolute;
            top: 50px;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid #333;
            border-radius: 8px;
            min-width: 200px;
            opacity: 0;
            pointer-events: none;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        
        .user-dropdown.active {
            opacity: 1;
            pointer-events: all;
            transform: translateY(0);
        }
        
        .dropdown-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }
        
        .dropdown-item:hover {
            background: #2a2a2a;
        }
        
        .dropdown-divider {
            height: 1px;
            background: #333;
            margin: 5px 0;
        }
        
        /* Admin Badge */
        .admin-badge {
            background: #a3e635;
            color: #000;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 700;
            margin-left: 8px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .content-row {
                padding: 0 20px;
            }
            
            .hero-content {
                padding: 0 20px;
            }
            
            .hero-logo-large {
                width: 120px;
                height: 120px;
            }
            
            .nav-links {
                display: none;
            }
            
            .content-card {
                min-width: 200px;
                height: 120px;
            }
        }
    </style>
</head>
<body>
    <!-- Header Netflix Style -->
    <header class="header-netflix" id="header">
        <div class="max-w-full mx-auto px-8 py-4 flex justify-between items-center">
            <div class="flex items-center gap-8">
                <!-- Logo -->
                <div class="flex items-center gap-3 cursor-pointer" onclick="renderPage('home')">
                    <svg class="logo-svg" viewBox="0 0 300 320" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="shieldG" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:0.9" />
                                <stop offset="100%" style="stop-color:#0a0a0a;stop-opacity:0.95" />
                            </linearGradient>
                            <linearGradient id="wolfG" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#a3e635;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#84cc16;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <path d="M150 10 L250 40 L260 160 Q260 240 150 300 Q40 240 40 160 L50 40 Z" 
                              fill="url(#shieldG)" stroke="#a3e635" stroke-width="3" opacity="0.8"/>
                        <g fill="url(#wolfG)">
                            <path d="M110 80 L90 50 L100 80 Z"/>
                            <path d="M190 80 L210 50 L200 80 Z"/>
                            <ellipse cx="150" cy="110" rx="50" ry="45"/>
                            <ellipse cx="150" cy="130" rx="35" ry="30"/>
                            <ellipse cx="150" cy="145" rx="20" ry="15" fill="#0a0a0a"/>
                            <ellipse cx="135" cy="105" rx="5" ry="8" fill="#fbbf24"/>
                            <ellipse cx="165" cy="105" rx="5" ry="8" fill="#fbbf24"/>
                            <circle cx="135" cy="105" r="3" fill="#0a0a0a"/>
                            <circle cx="165" cy="105" r="3" fill="#0a0a0a"/>
                            <path d="M130 140 L120 180 L130 200 M170 140 L180 180 L170 200" stroke="url(#wolfG)" stroke-width="8" fill="none" stroke-linecap="round"/>
                        </g>
                    </svg>
                    <span class="text-xl font-black bg-gradient-to-r from-lime-400 via-yellow-400 to-red-500 bg-clip-text text-transparent">WOLF STUDIOS</span>
                </div>
                
                <!-- Navigation -->
                <nav class="nav-links flex gap-6">
                    <a href="#" class="nav-link active" onclick="renderPage('home'); return false;">Início</a>
                    <a href="#" class="nav-link" onclick="renderPage('filmes'); return false;">Filmes</a>
                    <a href="#" class="nav-link" onclick="renderPage('series'); return false;">Séries</a>
                    <a href="#" class="nav-link" onclick="renderPage('trailers'); return false;">Trailers</a>
                    <a href="#" class="nav-link" onclick="renderPage('hqs'); return false;">HQs</a>
                    <a href="#" class="nav-link" onclick="renderPage('loja'); return false;">Loja</a>
                </nav>
            </div>
            
            <!-- Right Side -->
            <div class="flex items-center gap-4">
                <i class="fas fa-search text-xl cursor-pointer hover:text-lime-400 transition"></i>
                <i class="fas fa-bell text-xl cursor-pointer hover:text-lime-400 transition"></i>
                
                <!-- User Menu -->
                <div class="user-menu" id="auth-section">
                    <!-- Will be populated by JS -->
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Content will be injected here -->
    </main>

    <!-- Upload Modal (Admin Only) -->
    <div class="modal" id="uploadModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('uploadModal')">×</button>
            <div class="modal-header">
                <h2 class="text-2xl font-bold">Adicionar Novo Conteúdo</h2>
            </div>
            <div class="modal-body">
                <form id="uploadForm" onsubmit="handleUpload(event)">
                    <div class="form-group">
                        <label class="form-label">Categoria</label>
                        <select class="form-select" id="uploadCategory" required>
                            <option value="">Selecione uma categoria</option>
                            <option value="filmes">Filmes</option>
                            <option value="series">Séries</option>
                            <option value="trailers">Trailers</option>
                            <option value="hqs">HQs</option>
                            <option value="documentarios">Documentários</option>
                            <option value="loja">Loja</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Título</label>
                        <input type="text" class="form-input" id="uploadTitle" placeholder="Nome do conteúdo" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Descrição</label>
                        <textarea class="form-textarea" id="uploadDescription" placeholder="Descrição breve do conteúdo"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Preço (R$)</label>
                        <input type="number" class="form-input" id="uploadPrice" placeholder="0.00" step="0.01" min="0">
                        <small class="text-gray-500 text-xs mt-1 block">Deixe em branco ou 0 para conteúdo gratuito</small>
                    </div>
                    
                    <div class="form-group" id="videoUrlGroup">
                        <label class="form-label">URL do Vídeo (YouTube/Vimeo)</label>
                        <input type="url" class="form-input" id="uploadVideoUrl" placeholder="https://www.youtube.com/watch?v=...">
                        <small class="text-gray-500 text-xs mt-1 block">Para trailers, cole o link do YouTube ou Vimeo</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Imagem de Capa</label>
                        <div class="file-upload-area" id="fileUploadArea">
                            <i class="fas fa-cloud-upload-alt text-4xl text-lime-400 mb-3"></i>
                            <p class="text-lg mb-2">Clique ou arraste uma imagem</p>
                            <p class="text-sm text-gray-500">PNG, JPG até 5MB</p>
                            <input type="file" id="uploadFile" accept="image/*" style="display: none;">
                        </div>
                        <div id="filePreview" class="mt-4" style="display: none;">
                            <img id="previewImage" style="max-width: 100%; border-radius: 8px;">
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-upload mr-2"></i>
                        Adicionar Conteúdo
                    </button>
                    <button type="button" class="btn-secondary" onclick="closeModal('uploadModal')">
                        Cancelar
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('loginModal')">×</button>
            <div class="modal-header">
                <h2 class="text-2xl font-bold">Entrar</h2>
            </div>
            <div class="modal-body">
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Senha</label>
                        <input type="password" class="form-input" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn-primary">Entrar</button>
                    <button type="button" class="btn-secondary" onclick="closeModal('loginModal'); openModal('registerModal')">
                        Criar Conta
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('registerModal')">×</button>
            <div class="modal-header">
                <h2 class="text-2xl font-bold">Criar Conta</h2>
            </div>
            <div class="modal-body">
                <form onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label class="form-label">Nome</label>
                        <input type="text" class="form-input" id="registerName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Senha</label>
                        <input type="password" class="form-input" id="registerPassword" minlength="6" required>
                    </div>
                    <button type="submit" class="btn-primary">Criar Conta</button>
                    <button type="button" class="btn-secondary" onclick="closeModal('registerModal'); openModal('loginModal')">
                        Já tenho conta
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Video Player Modal -->
    <div class="modal" id="videoModal">
        <div class="video-modal-content">
            <button class="modal-close" onclick="closeVideoModal()" style="z-index: 10;">×</button>
            <div class="video-container" id="videoContainer">
                <!-- Video will be injected here -->
            </div>
            <div class="video-info" id="videoInfo">
                <!-- Video info will be injected here -->
            </div>
        </div>
    </div>

    <script>
        // Constants
        const WHATSAPP = "41998984617";
        const ADMIN_EMAIL = "admin@wolfstudios.com";
        
        // State
        let users = JSON.parse(localStorage.getItem('wolfUsers')) || {};
        let currentUser = JSON.parse(localStorage.getItem('wolfCurrentUser')) || null;
        let content = JSON.parse(localStorage.getItem('wolfContent')) || {
            filmes: [],
            series: [],
            trailers: [],
            hqs: [],
            documentarios: [],
            loja: []
        };
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateAuthUI();
            renderPage('home');
            setupScrollHeader();
            setupFileUpload();
            setupCategoryToggle();
        });
        
        // Scroll Header Effect
        function setupScrollHeader() {
            window.addEventListener('scroll', () => {
                const header = document.getElementById('header');
                if (window.scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });
        }
        
        // File Upload Setup
        function setupFileUpload() {
            const area = document.getElementById('fileUploadArea');
            const input = document.getElementById('uploadFile');
            
            area.addEventListener('click', () => input.click());
            
            area.addEventListener('dragover', (e) => {
                e.preventDefault();
                area.classList.add('dragover');
            });
            
            area.addEventListener('dragleave', () => {
                area.classList.remove('dragover');
            });
            
            area.addEventListener('drop', (e) => {
                e.preventDefault();
                area.classList.remove('dragover');
                const file = e.dataTransfer.files[0];
                if (file && file.type.startsWith('image/')) {
                    handleFileSelect(file);
                }
            });
            
            input.addEventListener('change', (e) => {
                if (e.target.files[0]) {
                    handleFileSelect(e.target.files[0]);
                }
            });
        }
        
        // Toggle video URL field based on category
        function setupCategoryToggle() {
            const categorySelect = document.getElementById('uploadCategory');
            const videoUrlGroup = document.getElementById('videoUrlGroup');
            
            categorySelect.addEventListener('change', (e) => {
                if (e.target.value === 'trailers') {
                    videoUrlGroup.style.display = 'block';
                    document.getElementById('uploadVideoUrl').required = true;
                } else {
                    videoUrlGroup.style.display = 'none';
                    document.getElementById('uploadVideoUrl').required = false;
                }
            });
        }
        
        function handleFileSelect(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById('previewImage').src = e.target.result;
                document.getElementById('filePreview').style.display = 'block';
            };
            reader.readAsDataURL(file);
        }
        
        // Modal Functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Auth Functions
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!users[email] || users[email].password !== password) {
                alert('Email ou senha incorretos!');
                return;
            }
            
            currentUser = { email, name: users[email].name, isAdmin: email === ADMIN_EMAIL };
            localStorage.setItem('wolfCurrentUser', JSON.stringify(currentUser));
            updateAuthUI();
            closeModal('loginModal');
            alert(`Bem-vindo(a), ${currentUser.name}!`);
            renderPage('home');
        }
        
        function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            if (users[email]) {
                alert('Este email já está cadastrado!');
                return;
            }
            
            users[email] = { name, password };
            localStorage.setItem('wolfUsers', JSON.stringify(users));
            alert('Conta criada com sucesso!');
            closeModal('registerModal');
            openModal('loginModal');
        }
        
        function logout() {
            currentUser = null;
            localStorage.removeItem('wolfCurrentUser');
            updateAuthUI();
            renderPage('home');
            alert('Logout realizado!');
        }
        
        function updateAuthUI() {
            const authSection = document.getElementById('auth-section');
            
            if (currentUser) {
                const initial = currentUser.name.charAt(0).toUpperCase();
                authSection.innerHTML = `
                    <div class="user-avatar" onclick="toggleUserMenu()">
                        ${initial}
                    </div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="dropdown-item">
                            <i class="fas fa-user"></i>
                            <span>${currentUser.name}</span>
                            ${currentUser.isAdmin ? '<span class="admin-badge">ADMIN</span>' : ''}
                        </div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" onclick="alert('Configurações em breve!')">
                            <i class="fas fa-cog"></i>
                            <span>Configurações</span>
                        </div>
                        <div class="dropdown-item" onclick="alert('Minha lista em breve!')">
                            <i class="fas fa-heart"></i>
                            <span>Minha Lista</span>
                        </div>
                        ${currentUser.isAdmin ? `
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" onclick="openModal('uploadModal'); toggleUserMenu();">
                            <i class="fas fa-upload"></i>
                            <span>Adicionar Conteúdo</span>
                        </div>
                        ` : ''}
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Sair</span>
                        </div>
                    </div>
                `;
            } else {
                authSection.innerHTML = `
                    <button onclick="openModal('loginModal')" class="upload-btn">
                        <i class="fas fa-sign-in-alt"></i>
                        Entrar
                    </button>
                `;
            }
        }
        
        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('active');
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            const userMenu = document.querySelector('.user-menu');
            const dropdown = document.getElementById('userDropdown');
            if (dropdown && !userMenu.contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });
        
        // Upload Function
        function handleUpload(e) {
            e.preventDefault();
            
            if (!currentUser || !currentUser.isAdmin) {
                alert('Apenas administradores podem adicionar conteúdo!');
                return;
            }
            
            const category = document.getElementById('uploadCategory').value;
            const title = document.getElementById('uploadTitle').value;
            const description = document.getElementById('uploadDescription').value;
            const price = document.getElementById('uploadPrice').value;
            const videoUrl = document.getElementById('uploadVideoUrl').value;
            const imageFile = document.getElementById('uploadFile').files[0];
            
            if (!imageFile) {
                alert('Por favor, adicione uma imagem!');
                return;
            }
            
            if (category === 'trailers' && !videoUrl) {
                alert('Por favor, adicione a URL do vídeo para trailers!');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = (e) => {
                const newContent = {
                    id: Date.now(),
                    title,
                    description,
                    price: price ? parseFloat(price) : 0,
                    image: e.target.result,
                    videoUrl: videoUrl || null,
                    createdAt: new Date().toISOString()
                };
                
                content[category].push(newContent);
                localStorage.setItem('wolfContent', JSON.stringify(content));
                
                alert('Conteúdo adicionado com sucesso!');
                closeModal('uploadModal');
                document.getElementById('uploadForm').reset();
                document.getElementById('filePreview').style.display = 'none';
                document.getElementById('videoUrlGroup').style.display = 'none';
                renderPage(category);
            };
            reader.readAsDataURL(imageFile);
        }
        
        // Render Pages
        function renderPage(page) {
            // Update nav active state
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            const mainContent = document.getElementById('main-content');
            
            switch(page) {
                case 'home':
                    renderHome();
                    break;
                case 'filmes':
                case 'series':
                case 'trailers':
                case 'hqs':
                case 'loja':
                    renderCategory(page);
                    break;
            }
        }
        
        function renderHome() {
            const mainContent = document.getElementById('main-content');
            mainContent.innerHTML = `
                <!-- Hero Banner -->
                <section class="hero-banner">
                    <div class="hero-content">
                        <svg class="hero-logo-large" viewBox="0 0 300 320" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="heroShield" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:0.9" />
                                    <stop offset="100%" style="stop-color:#0a0a0a;stop-opacity:0.95" />
                                </linearGradient>
                                <linearGradient id="heroWolf" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:#a3e635;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#84cc16;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <path d="M150 10 L250 40 L260 160 Q260 240 150 300 Q40 240 40 160 L50 40 Z" 
                                  fill="url(#heroShield)" stroke="#a3e635" stroke-width="3" opacity="0.8"/>
                            <g fill="url(#heroWolf)">
                                <path d="M110 80 L90 50 L100 80 Z"/>
                                <path d="M190 80 L210 50 L200 80 Z"/>
                                <ellipse cx="150" cy="110" rx="50" ry="45"/>
                                <ellipse cx="150" cy="130" rx="35" ry="30"/>
                                <ellipse cx="150" cy="145" rx="20" ry="15" fill="#0a0a0a"/>
                                <ellipse cx="135" cy="105" rx="5" ry="8" fill="#fbbf24"/>
                                <ellipse cx="165" cy="105" rx="5" ry="8" fill="#fbbf24"/>
                                <circle cx="135" cy="105" r="3" fill="#0a0a0a"/>
                                <circle cx="165" cy="105" r="3" fill="#0a0a0a"/>
                                <path d="M130 140 L120 180 L130 200 M170 140 L180 180 L170 200" stroke="url(#heroWolf)" stroke-width="8" fill="none" stroke-linecap="round"/>
                            </g>
                        </svg>
                        <h1 class="text-5xl font-black mb-4 leading-tight">
                            Bem-vindo ao<br>
                            <span class="bg-gradient-to-r from-lime-400 via-yellow-400 to-red-500 bg-clip-text text-transparent">
                                Wolf Studios
                            </span>
                        </h1>
                        <p class="text-xl text-gray-300 mb-8 max-w-xl">
                            Filmes épicos, séries envolventes e quadrinhos exclusivos. Conteúdo premium criado por Jeff.
                        </p>
                        <div class="flex gap-4">
                            <button onclick="renderPage('filmes')" class="px-8 py-3 bg-white text-black font-bold rounded hover:bg-gray-200 transition flex items-center gap-2">
                                <i class="fas fa-play"></i>
                                Explorar Agora
                            </button>
                            <button onclick="window.open('https://wa.me/55${WHATSAPP}', '_blank')" class="px-8 py-3 bg-gray-700 bg-opacity-80 text-white font-bold rounded hover:bg-opacity-60 transition flex items-center gap-2">
                                <i class="fab fa-whatsapp"></i>
                                Contato
                            </button>
                        </div>
                    </div>
                </section>
                
                <!-- Content Rows -->
                ${renderContentRow('Filmes Populares', 'filmes')}
                ${renderContentRow('Séries em Destaque', 'series')}
                ${renderContentRow('Trailers & Prévias', 'trailers', false, true)}
                ${renderContentRow('HQs Exclusivas', 'hqs')}
                ${renderContentRow('Documentários', 'documentarios')}
                ${renderContentRow('Loja Wolf Studios', 'loja')}
            `;
        }
        
        function renderCategory(category) {
            const titles = {
                filmes: 'Filmes',
                series: 'Séries',
                trailers: 'Trailers & Prévias',
                hqs: 'Quadrinhos',
                loja: 'Loja'
            };
            
            const mainContent = document.getElementById('main-content');
            const isTrailers = category === 'trailers';
            mainContent.innerHTML = `
                <div style="margin-top: 100px;">
                    ${renderContentRow(titles[category], category, true, isTrailers)}
                </div>
            `;
        }
        
        function renderContentRow(title, category, fullPage = false, isTrailers = false) {
            const items = content[category] || [];
            const emptyCount = Math.max(6 - items.length, 0);
            
            return `
                <section class="content-row">
                    <div class="row-title">
                        <span>${title}</span>
                        ${currentUser && currentUser.isAdmin ? `
                            <button onclick="openUploadModal('${category}', ${isTrailers})" class="upload-btn">
                                <i class="fas fa-plus"></i>
                                Adicionar
                            </button>
                        ` : ''}
                    </div>
                    <div class="cards-container">
                        ${items.map(item => {
                            const itemTitle = item.title.replace(/'/g, "\\'").replace(/"/g, "&quot;");
                            const itemDesc = (item.description || '').replace(/'/g, "\\'").replace(/"/g, "&quot;");
                            const itemVideoUrl = (item.videoUrl || '').replace(/'/g, "\\'");
                            
                            return `
                            <div class="content-card ${isTrailers ? 'trailer-card' : ''} has-content" 
                                 style="background-image: url('${item.image}');" 
                                 ${isTrailers && item.videoUrl ? `onclick="playVideo('${itemVideoUrl}', '${itemTitle}', '${itemDesc}')"` : ''}>
                                ${isTrailers && item.videoUrl ? '<div class="trailer-play-icon"><i class="fas fa-play"></i></div>' : ''}
                                <div class="card-overlay">
                                    <div class="card-title">${item.title}</div>
                                    <div class="card-info">
                                        ${isTrailers ? '<span><i class="fas fa-video mr-1"></i>Trailer</span>' : ''}
                                        ${!isTrailers && item.price > 0 ? `<span>R$ ${item.price.toFixed(2)}</span>` : ''}
                                        ${!isTrailers && item.price === 0 ? '<span>Grátis</span>' : ''}
                                    </div>
                                    <div class="card-actions">
                                        ${!isTrailers ? `
                                            <div class="btn-play" onclick="event.stopPropagation(); buyContent('${itemTitle}', ${item.price})">
                                                <i class="fas fa-shopping-cart"></i>
                                            </div>
                                            <div class="btn-info" onclick="event.stopPropagation(); showContentInfo('${itemTitle}', '${itemDesc}', ${item.price})">
                                                <i class="fas fa-info"></i>
                                            </div>
                                        ` : ''}
                                        ${currentUser && currentUser.isAdmin ? `
                                            <div class="btn-info" onclick="event.stopPropagation(); deleteContent('${category}', ${item.id})" style="border-color: #ef4444; color: #ef4444;">
                                                <i class="fas fa-trash"></i>
                                            </div>
                                        ` : ''}
                                    </div>
                                </div>
                            </div>
                        `}).join('')}
                        
                        ${Array(emptyCount).fill(0).map(() => `
                            <div class="content-card ${isTrailers ? 'trailer-card' : ''}">
                                <div class="empty-card-content">
                                    <i class="fas fa-${isTrailers ? 'video' : 'film'}"></i>
                                    <p>Em breve</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `;
        }
        
        function openUploadModal(category, isTrailers) {
            openModal('uploadModal');
            document.getElementById('uploadCategory').value = category;
            
            if (isTrailers) {
                document.getElementById('videoUrlGroup').style.display = 'block';
                document.getElementById('uploadVideoUrl').required = true;
            } else {
                document.getElementById('videoUrlGroup').style.display = 'none';
                document.getElementById('uploadVideoUrl').required = false;
            }
        }
        
        function buyContent(title, price) {
            const cleanTitle = title.replace(/\\/g, '');
            const msg = `Olá! Gostaria de comprar: ${cleanTitle} - R$ ${price.toFixed(2)}`;
            window.open(`https://wa.me/55${WHATSAPP}?text=${encodeURIComponent(msg)}`, '_blank');
        }
        
        function showContentInfo(title, description, price) {
            const cleanTitle = title.replace(/\\/g, '');
            const cleanDesc = description.replace(/\\/g, '');
            alert(`${cleanTitle}\n\n${cleanDesc || 'Sem descrição'}\n\nPreço: R$ ${price.toFixed(2)}`);
        }
        
        function deleteContent(category, id) {
            if (!confirm('Tem certeza que deseja excluir este conteúdo?')) return;
            
            content[category] = content[category].filter(item => item.id !== id);
            localStorage.setItem('wolfContent', JSON.stringify(content));
            renderPage(category);
        }
        
        // Video Player Functions
        function playVideo(url, title, description) {
            const videoId = extractVideoId(url);
            const embedUrl = getEmbedUrl(url, videoId);
            
            if (!embedUrl) {
                alert('URL de vídeo inválida!');
                return;
            }
            
            document.getElementById('videoContainer').innerHTML = `
                <iframe src="${embedUrl}" allowfullscreen allow="autoplay; encrypted-media"></iframe>
            `;
            
            document.getElementById('videoInfo').innerHTML = `
                <h3 class="video-title">${title}</h3>
                <p class="video-description">${description || 'Sem descrição disponível'}</p>
            `;
            
            openModal('videoModal');
        }
        
        function closeVideoModal() {
            closeModal('videoModal');
            document.getElementById('videoContainer').innerHTML = '';
        }
        
        function extractVideoId(url) {
            // YouTube
            let match = url.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);
            if (match) return match[1];
            
            // Vimeo
            match = url.match(/vimeo\.com\/(?:.*\/)?(\d+)/);
            if (match) return match[1];
            
            return null;
        }
        
        function getEmbedUrl(url, videoId) {
            if (url.includes('youtube.com') || url.includes('youtu.be')) {
                return `https://www.youtube.com/embed/${videoId}?autoplay=1`;
            } else if (url.includes('vimeo.com')) {
                return `https://player.vimeo.com/video/${videoId}?autoplay=1`;
            }
            return null;
        }
        
        // WhatsApp Link
        function getWhatsappLink() {
            return `https://wa.me/55${WHATSAPP}`;
        }
    </script>
</body>
</html>
